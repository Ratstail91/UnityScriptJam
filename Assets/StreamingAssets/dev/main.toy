import "Standard";
import "Character";
import "Monsters";
import "Items";
import "Dungeon";

//load the character
Character.SetName("Kayne");
Character.LoadSprite("img/player.png");
Character.PositionX = 3;
Character.PositionY = 2;

//generate the world
Dungeon.RegisterTile("floor", "Empty", "img/tile.png", null, null);

for (var i = 0; i < 5; i++) {
	for (var j = 0; j < 5; j++) {
		Dungeon.SpawnTile("floor", i, j);
	}
}

//monsters
var start = Clock();

Monsters.RegisterMonster("bat", "Bat", "img/bat.png", monster => {
//	monster.Move("north", 1);

//	monster.PositionX += 1;

	return Clock() - start < 5;
});

Monsters.SpawnMonster("bat", 0, 0);

//items
Items.RegisterContainer("chest", "Chest", "img/chest.png", "static", 20);
Items.RegisterWeapon("sword", "Sword", "img/sword.png", "melee", 4);
Items.RegisterWearable("ring", "Silver Ring", "img/ring.png", () => true, () => true); //TODO: (1) equip and remove
Items.RegisterUsable("potion", "Health Potion", "img/potion.png", () => false); //TODO: (1) returning true means keep it

Items.SpawnContainer("chest", 1, 1);
Items.SpawnWeapon("sword", 2, 2);
Items.SpawnWearable("ring", 3, 3);
Items.SpawnUsable("potion", 4, 4);
